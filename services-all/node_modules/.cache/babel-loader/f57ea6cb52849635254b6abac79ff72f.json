{"ast":null,"code":"import _slicedToArray from \"/Users/anian/Documents/aca/services-all/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anian/Documents/aca/services-all/src/App.js\";\nimport React, { useState, useEffect, Suspense, lazy } from \"react\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport { fire } from \"./config/fire\";\nimport LoginComponent from \"./login/login\";\nimport SignupComponent from \"./signup/signup\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport \"./App.css\";\nimport { sign } from \"crypto\";\nconst Home = lazy(() => import(\"./pages/Home\"));\nconst Admin = lazy(() => import(\"./pages/AdminPanel\"));\nconst Message = lazy(() => import(\"./Message/Message\"));\nconst Profile = lazy(() => import(\"./pages/Profile\"));\n\nfunction App() {\n  let _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      signedIn = _useState2[0],\n      setSignedIn = _useState2[1],\n      _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      admin = _useState4[0],\n      setAdmin = _useState4[1],\n      _useState5 = useState(\"name here\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fullName = _useState6[0],\n      setFullName = _useState6[1];\n\n  useEffect(() => {\n    // fire.auth().onAuthStateChanged(function(user) {\n    //   setSignedIn(!!user);\n    //   if (\n    //     signedIn &&\n    //     fire.auth().currentUser.email === \"admin@services-all.com\"\n    //   ) {\n    //     setAdmin(true);\n    //     setFullName(\"Administrator\");\n    //   } else {\n    //     if (fire.auth().currentUser) {\n    //       fire\n    //         .firestore()\n    //         .collection(\"names\")\n    //         .doc(`${fire.auth().currentUser.email}`)\n    //         .get()\n    //         .then(doc => {\n    //           setFullName(`${doc.data().name} ${doc.data().surname}`);\n    //         });\n    //     }\n    //   }\n    // });\n    fire.auth().onAuthStateChanged(function (user) {\n      setSignedIn(!!user);\n\n      if (!!user && fire.auth().currentUser.email === \"admin@services-all.com\") {\n        setAdmin(true);\n        setFullName(\"Administrator\");\n      } else {\n        setAdmin(false);\n\n        if (!!user) {\n          setTimeout(() => {\n            fire.firestore().collection(\"names\").doc(\"\".concat(fire.auth().currentUser.email)).get().then(doc => {\n              setFullName(\"\".concat(doc.data().name, \" \").concat(doc.data().surname));\n            });\n          }, 500);\n        }\n      }\n    });\n  }, [admin]);\n  return React.createElement(ErrorBoundary, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(UserContext.Provider, {\n    value: {\n      signedIn: signedIn,\n      admin: admin,\n      name: fullName\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(Router, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"routing-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Suspense, {\n    fallback: React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Loading...\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/home\",\n    component: Home,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), signedIn === null ? React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Loading...\") : signedIn ? React.createElement(React.Fragment, null, admin ? React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/admin-panel\",\n    component: Admin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/profile\",\n    render: props => React.createElement(Profile, Object.assign({}, props, {\n      admin: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(Redirect, {\n    to: \"/home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  })) : React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/messages\",\n    component: Message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/profile\",\n    component: Profile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Redirect, {\n    to: \"/profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }))) : React.createElement(React.Fragment, null, React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    component: LoginComponent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/signup\",\n    component: SignupComponent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }), React.createElement(Redirect, {\n    to: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }))))))));\n}\n\nexport const UserContext = React.createContext({});\nexport default App;","map":{"version":3,"sources":["/Users/anian/Documents/aca/services-all/src/App.js"],"names":["React","useState","useEffect","Suspense","lazy","BrowserRouter","Router","Route","Switch","Redirect","fire","LoginComponent","SignupComponent","ErrorBoundary","sign","Home","Admin","Message","Profile","App","signedIn","setSignedIn","admin","setAdmin","fullName","setFullName","auth","onAuthStateChanged","user","currentUser","email","setTimeout","firestore","collection","doc","get","then","data","name","surname","props","UserContext","createContext"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Suspense, lazy } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Route,\n  Switch,\n  Redirect\n} from \"react-router-dom\";\nimport { fire } from \"./config/fire\";\nimport LoginComponent from \"./login/login\";\nimport SignupComponent from \"./signup/signup\";\nimport ErrorBoundary from \"./ErrorBoundary\";\n\nimport \"./App.css\";\nimport { sign } from \"crypto\";\n\nconst Home = lazy(() => import(\"./pages/Home\"));\nconst Admin = lazy(() => import(\"./pages/AdminPanel\"));\nconst Message = lazy(() => import(\"./Message/Message\"));\nconst Profile = lazy(() => import(\"./pages/Profile\"));\n\nfunction App() {\n  let [signedIn, setSignedIn] = useState(null),\n    [admin, setAdmin] = useState(false),\n    [fullName, setFullName] = useState(\"name here\");\n\n  useEffect(() => {\n    // fire.auth().onAuthStateChanged(function(user) {\n    //   setSignedIn(!!user);\n    //   if (\n    //     signedIn &&\n    //     fire.auth().currentUser.email === \"admin@services-all.com\"\n    //   ) {\n    //     setAdmin(true);\n    //     setFullName(\"Administrator\");\n    //   } else {\n    //     if (fire.auth().currentUser) {\n    //       fire\n    //         .firestore()\n    //         .collection(\"names\")\n    //         .doc(`${fire.auth().currentUser.email}`)\n    //         .get()\n    //         .then(doc => {\n    //           setFullName(`${doc.data().name} ${doc.data().surname}`);\n    //         });\n    //     }\n    //   }\n    // });\n\n    fire.auth().onAuthStateChanged(function(user) {\n      setSignedIn(!!user);\n      if (\n        !!user &&\n        fire.auth().currentUser.email === \"admin@services-all.com\"\n      ) {\n        setAdmin(true);\n        setFullName(\"Administrator\");\n      } else {\n        setAdmin(false);\n        if (!!user) {\n          setTimeout(() => {\n            fire\n              .firestore()\n              .collection(\"names\")\n              .doc(`${fire.auth().currentUser.email}`)\n              .get()\n              .then(doc => {\n                setFullName(`${doc.data().name} ${doc.data().surname}`);\n              });\n          }, 500);\n        }\n      }\n    });\n  }, [admin]);\n\n  return (\n    <ErrorBoundary>\n      <UserContext.Provider\n        value={{\n          signedIn: signedIn,\n          admin: admin,\n          name: fullName\n        }}\n      >\n        <Router>\n          <div id=\"routing-container\">\n            <Suspense fallback={<h1>Loading...</h1>}>\n              <Switch>\n                <Route path=\"/home\" component={Home} />\n\n                {signedIn === null ? (\n                  <h1>Loading...</h1>\n                ) : signedIn ? (\n                  <>\n                    {admin ? (\n                      <Switch>\n                        <Route exact path=\"/admin-panel\" component={Admin} />\n                        <Route\n                          exact\n                          path=\"/profile\"\n                          render={props => <Profile {...props} admin={true} />}\n                        />\n                        <Redirect to=\"/home\" />\n                      </Switch>\n                    ) : (\n                      <Switch>\n                        <Route exact path=\"/messages\" component={Message} />\n                        <Route exact path=\"/profile\" component={Profile} />\n                        <Redirect to=\"/profile\" />\n                      </Switch>\n                    )}\n                  </>\n                ) : (\n                  <>\n                    <Route exact path=\"/login\" component={LoginComponent} />\n                    <Route exact path=\"/signup\" component={SignupComponent} />\n                    <Redirect to=\"/login\" />\n                  </>\n                )}\n              </Switch>\n            </Suspense>\n          </div>\n        </Router>\n      </UserContext.Provider>\n    </ErrorBoundary>\n  );\n}\n\nexport const UserContext = React.createContext({});\nexport default App;\n"]},"metadata":{},"sourceType":"module"}