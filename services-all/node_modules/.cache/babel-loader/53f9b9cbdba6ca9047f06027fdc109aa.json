{"ast":null,"code":"import _slicedToArray from \"/Users/anian/Desktop/services-all/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anian/Desktop/services-all/src/pages/Home.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Header from \"../components/Header\";\nimport Categories from \"../components/Categories\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\nimport Add from \"../components/Add\";\nimport { UserContext } from \"../App\";\n\nfunction Home(props) {\n  let _useState = useState(\"All Categories\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selection = _useState2[0],\n      setSelection = _useState2[1];\n\n  let _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      list = _useState4[0],\n      setList = _useState4[1];\n\n  let user = useContext(UserContext);\n\n  let _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      keyword = _useState6[0],\n      setKeyword = _useState6[1];\n\n  useEffect(() => {\n    let results = {};\n\n    if (selection === \"All Categories\") {\n      fire.firestore().collection(\"posts\").onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else if (selection === \"My Posts\" && user.signedIn) {\n      fire.firestore().collection(\"posts\").where(\"user\", \"==\", fire.auth().currentUser.email).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else {\n      fire.firestore().collection(\"posts\").where(\"category\", \"==\", selection).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    }\n  }, [selection]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  function handleSearchChange(e) {\n    setKeyword(e.target.value);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    onClick: handleSelection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(Categories, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  })), React.createElement(Search, {\n    keyword: keyword,\n    onChange: handleSearchChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"results-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, list ? Object.keys(list).filter(item => list[item].title.toLowerCase().includes(keyword.trim().toLowerCase())).map((item, index) => {\n    return list[item].status === \"deleted\" ? null : React.createElement(\"div\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Post, {\n      id: item,\n      title: list[item].title,\n      admin: props.admin ? true : false,\n      description: list[item].description,\n      name: list[item].name,\n      phone: list[item].phone,\n      deletable: selection === \"My Posts\" || user.admin ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }));\n  }) : React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"Loading...\")), React.createElement(Add, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/anian/Desktop/services-all/src/pages/Home.js"],"names":["React","useState","useEffect","useContext","Header","Categories","Footer","fire","Post","Search","Add","UserContext","Home","props","selection","setSelection","list","setList","user","keyword","setKeyword","results","firestore","collection","onSnapshot","snapshot","forEach","doc","id","data","signedIn","where","auth","currentUser","email","handleSelection","e","stopPropagation","target","nodeName","value","handleSearchChange","Object","keys","filter","item","title","toLowerCase","includes","trim","map","index","status","admin","description","name","phone"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport Header from \"../components/Header\";\nimport Categories from \"../components/Categories\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\nimport Add from \"../components/Add\";\nimport { UserContext } from \"../App\";\n\nfunction Home(props) {\n  let [selection, setSelection] = useState(\"All Categories\");\n  let [list, setList] = useState(null);\n  let user = useContext(UserContext);\n  let [keyword, setKeyword] = useState(\"\");\n\n  useEffect(() => {\n    let results = {};\n\n    if (selection === \"All Categories\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else if (selection === \"My Posts\" && user.signedIn) {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"user\", \"==\", fire.auth().currentUser.email)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"category\", \"==\", selection)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    }\n  }, [selection]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  function handleSearchChange(e) {\n    setKeyword(e.target.value);\n  }\n\n  return (\n    <div>\n      <div onClick={handleSelection}>\n        <Header />\n        <Categories />\n      </div>\n      <Search keyword={keyword} onChange={handleSearchChange} />\n      <div className=\"results-container\">\n        {list ? (\n          Object.keys(list)\n            .filter(item =>\n              list[item].title\n                .toLowerCase()\n                .includes(keyword.trim().toLowerCase())\n            )\n            .map((item, index) => {\n              return list[item].status === \"deleted\" ? null : (\n                <div key={index}>\n                  <Post\n                    id={item}\n                    title={list[item].title}\n                    admin={props.admin ? true : false}\n                    description={list[item].description}\n                    name={list[item].name}\n                    phone={list[item].phone}\n                    deletable={\n                      selection === \"My Posts\" || user.admin ? true : false\n                    }\n                  />\n                </div>\n              );\n            })\n        ) : (\n          <h1>Loading...</h1>\n        )}\n      </div>\n      <Add />\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}