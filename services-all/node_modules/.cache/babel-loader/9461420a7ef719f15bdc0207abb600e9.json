{"ast":null,"code":"import _slicedToArray from \"/Users/anian/Desktop/Project/services-all/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anian/Desktop/Project/services-all/src/pages/Home.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Avatar from \"../components/Avatar\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\n\nfunction Home(props) {\n  let _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      signedIn = _useState2[0],\n      setSignedIn = _useState2[1],\n      _useState3 = useState(\"All Categories\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selection = _useState4[0],\n      setSelection = _useState4[1],\n      _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      list = _useState6[0],\n      setList = _useState6[1];\n\n  function handlePostClick(e) {\n    e.stopPropagation();\n\n    if (e.target.innerText === \"delete\") {\n      fire.firestore().collection(\"posts\").doc(e.target.value).delete();\n    }\n  }\n\n  useEffect(() => {\n    let results = {};\n    fire.auth().onAuthStateChanged(function (user) {\n      setSignedIn(!!user);\n    });\n\n    if (selection === \"All Categories\") {\n      fire.firestore().collection(\"posts\").onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else if (selection === \"My Posts\") {\n      fire.firestore().collection(\"posts\").where(\"user\", \"==\", fire.auth().currentUser.email).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else {\n      fire.firestore().collection(\"posts\").where(\"category\", \"==\", selection).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    }\n  }, [selection, handlePostClick]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  return React.createElement(\"div\", {\n    onClick: handleSelection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(Search, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"results-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, list && Object.keys(list).map((item, index) => {\n    return list[item].status === \"deleted\" ? null : React.createElement(\"div\", {\n      onClick: handlePostClick,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(Post, {\n      id: item,\n      title: list[item].title,\n      admin: props.admin ? true : false,\n      description: list[item].description,\n      deletable: selection === \"My Posts\" || props.admin ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }));\n  })), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }));\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/anian/Desktop/Project/services-all/src/pages/Home.js"],"names":["React","useState","useEffect","Header","Footer","fire","Avatar","Post","Search","Home","props","signedIn","setSignedIn","selection","setSelection","list","setList","handlePostClick","e","stopPropagation","target","innerText","firestore","collection","doc","value","delete","results","auth","onAuthStateChanged","user","onSnapshot","snapshot","forEach","id","data","where","currentUser","email","handleSelection","nodeName","Object","keys","map","item","index","status","title","admin","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Avatar from \"../components/Avatar\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\n\nfunction Home(props) {\n  let [signedIn, setSignedIn] = useState(null),\n    [selection, setSelection] = useState(\"All Categories\"),\n    [list, setList] = useState({});\n\n  function handlePostClick(e) {\n    e.stopPropagation();\n    if (e.target.innerText === \"delete\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .doc(e.target.value)\n        .delete();\n    }\n  }\n\n  useEffect(() => {\n    let results = {};\n    fire.auth().onAuthStateChanged(function(user) {\n      setSignedIn(!!user);\n    });\n    if (selection === \"All Categories\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else if (selection === \"My Posts\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"user\", \"==\", fire.auth().currentUser.email)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"category\", \"==\", selection)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    }\n  }, [selection, handlePostClick]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  return (\n    <div onClick={handleSelection}>\n      <Header />\n      <Search />\n      <div className=\"results-container\">\n        {list &&\n          Object.keys(list).map((item, index) => {\n            return list[item].status === \"deleted\" ? null : (\n              <div onClick={handlePostClick} key={index}>\n                <Post\n                  id={item}\n                  title={list[item].title}\n                  admin={props.admin ? true : false}\n                  description={list[item].description}\n                  deletable={\n                    selection === \"My Posts\" || props.admin ? true : false\n                  }\n                />\n              </div>\n            );\n          })}\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}