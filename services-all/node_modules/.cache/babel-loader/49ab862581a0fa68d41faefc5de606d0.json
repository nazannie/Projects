{"ast":null,"code":"import _slicedToArray from \"/Users/anian/Desktop/services-all/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anian/Desktop/services-all/src/pages/Home.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Avatar from \"../components/Avatar\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\nimport Add from \"../components/Add\";\nimport { UserContext } from \"../App\";\nimport Message from \"../Message/Message\";\n\nfunction Home(props) {\n  let _useState = useState(\"All Categories\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selection = _useState2[0],\n      setSelection = _useState2[1];\n\n  let _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      list = _useState4[0],\n      setList = _useState4[1],\n      user = useContext(UserContext);\n\n  function handlePostClick(e) {\n    e.stopPropagation();\n\n    if (e.target.innerText === \"delete\") {\n      fire.firestore().collection(\"posts\").doc(e.target.value).delete();\n    }\n  }\n\n  useEffect(() => {\n    let results = {};\n\n    if (selection === \"All Categories\") {\n      fire.firestore().collection(\"posts\").onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else if (selection === \"My Posts\") {\n      fire.firestore().collection(\"posts\").where(\"user\", \"==\", fire.auth().currentUser.email).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else {\n      fire.firestore().collection(\"posts\").where(\"category\", \"==\", selection).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    }\n  }, [selection, handlePostClick]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    onClick: handleSelection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(Search, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"results-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, list && Object.keys(list).map((item, index) => {\n    return list[item].status === \"deleted\" ? null : React.createElement(\"div\", {\n      onClick: handlePostClick,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(Post, {\n      id: item,\n      title: list[item].title,\n      admin: props.admin ? true : false,\n      description: list[item].description,\n      deletable: selection === \"My Posts\" || user.admin ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }));\n  })), React.createElement(Add, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), user.admin ? null : fire.auth().currentUser ? React.createElement(Message, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }) : null);\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/anian/Desktop/services-all/src/pages/Home.js"],"names":["React","useState","useEffect","useContext","Header","Footer","fire","Avatar","Post","Search","Add","UserContext","Message","Home","props","selection","setSelection","list","setList","user","handlePostClick","e","stopPropagation","target","innerText","firestore","collection","doc","value","delete","results","onSnapshot","snapshot","forEach","id","data","where","auth","currentUser","email","handleSelection","nodeName","Object","keys","map","item","index","status","title","admin","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Avatar from \"../components/Avatar\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\nimport Add from \"../components/Add\";\nimport { UserContext } from \"../App\";\nimport Message from \"../Message/Message\";\n\nfunction Home(props) {\n  let [selection, setSelection] = useState(\"All Categories\");\n  let  [list, setList] = useState({}),\n    user = useContext(UserContext);\n\n  function handlePostClick(e) {\n    e.stopPropagation();\n    if (e.target.innerText === \"delete\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .doc(e.target.value)\n        .delete();\n    }\n  }\n\n  useEffect(() => {\n    let results = {};\n\n    if (selection === \"All Categories\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else if (selection === \"My Posts\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"user\", \"==\", fire.auth().currentUser.email)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"category\", \"==\", selection)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    }\n  }, [selection, handlePostClick]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  return (\n    <div>\n      <div onClick={handleSelection}>\n        <Header />\n      </div>\n      <Search />\n      <div className=\"results-container\">\n        {list &&\n          Object.keys(list).map((item, index) => {\n            return list[item].status === \"deleted\" ? null : (\n              <div onClick={handlePostClick} key={index}>\n                <Post\n                  id={item}\n                  title={list[item].title}\n                  admin={props.admin ? true : false}\n                  description={list[item].description}\n                  deletable={\n                    selection === \"My Posts\" || user.admin ? true : false\n                  }\n                />\n              </div>\n            );\n          })}\n      </div>\n      <Add />\n\n      <Footer />\n      {user.admin ? null : fire.auth().currentUser ? <Message /> : null}\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}