{"ast":null,"code":"import _defineProperty from \"/Users/anian/Desktop/services-all/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/anian/Desktop/services-all/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anian/Desktop/services-all/src/components/Post.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useRef, useEffect, useContext } from \"react\";\nimport { fire } from \"../config/fire\";\nimport { UserContext } from \"../App\";\nimport \"../styles/post.css\";\n\nfunction Post(props) {\n  let postRef = useRef(fire.firestore().collection(\"posts\").doc(props.id));\n\n  let _useState = useState(\"default\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1],\n      _useState3 = useState({\n    title: props.title,\n    description: props.description,\n    phone: props.phone\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formData = _useState4[0],\n      setFormData = _useState4[1];\n\n  let user = useContext(UserContext);\n  useEffect(() => {}, [setStatus, setFormData, handleClick]);\n\n  function handleChange(e) {\n    e.preventDefault();\n    let _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value;\n    setFormData(_objectSpread({}, formData, {\n      [name]: value\n    }));\n  }\n\n  function viewPost(e) {\n    e.stopPropagation();\n    status === \"viewing\" ? setStatus(\"default\") : setStatus(\"viewing\");\n  }\n\n  function handleClick(e) {\n    e.stopPropagation();\n\n    switch (e.target.innerText) {\n      case \"cancel\":\n      case \"no\":\n        setFormData({\n          title: props.title,\n          description: props.description,\n          phone: props.phone\n        });\n        setStatus(\"default\");\n        break;\n\n      case \"edit\":\n        setStatus(\"editing\");\n        break;\n\n      case \"delete\":\n        setStatus(\"deleting\");\n        break;\n\n      case \"save\":\n        postRef.current.update({\n          title: formData.title,\n          description: formData.description\n        }).then(() => setStatus(\"default\"));\n        break;\n\n      case \"yes\":\n        postRef.current.update({\n          status: \"deleted\"\n        });\n        break;\n    }\n  }\n\n  return React.createElement(\"div\", {\n    className: \"post\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, status === \"editing\" ? React.createElement(React.Fragment, null, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title-window editing\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"post-title\",\n    name: \"title\",\n    onChange: handleChange,\n    value: formData.title,\n    autofocus: \"true\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"description-window editing\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    className: \"post-description editing\",\n    name: \"description\",\n    value: formData.description,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    className: \"contact-phone\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, props.name), \" \", React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"tel. :\", props.phone)))) : React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"title-window\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"post-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, props.title)), status === \"viewing\" ? React.createElement(\"div\", {\n    className: \"description-window \",\n    onClick: viewPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"post-description viewing\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, props.description)) : React.createElement(\"div\", {\n    className: \"description-window\",\n    onClick: viewPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, status === \"deleting\" ? React.createElement(\"p\", {\n    className: \"post-description deleting\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Are you sure you wish to delete this note?\") : React.createElement(\"p\", {\n    className: \"post-description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, props.description)), React.createElement(\"p\", {\n    className: \"contact-phone\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, props.name), \" \", React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"tel. :\", props.phone))), props.deletable ? React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    className: \"post-btn-red\",\n    onClick: handleClick,\n    value: props.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, status === \"editing\" ? \"cancel\" : status === \"deleting\" ? \"yes\" : \"delete\"), props.admin ? null : React.createElement(\"button\", {\n    className: \"post-btn-green\",\n    onClick: handleClick,\n    value: props.id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, status === \"editing\" ? \"save\" : status === \"deleting\" ? \"no\" : \"edit\")) : null);\n}\n\nexport default Post;","map":{"version":3,"sources":["/Users/anian/Desktop/services-all/src/components/Post.js"],"names":["React","useState","useRef","useEffect","useContext","fire","UserContext","Post","props","postRef","firestore","collection","doc","id","status","setStatus","title","description","phone","formData","setFormData","user","handleClick","handleChange","e","preventDefault","target","name","value","viewPost","stopPropagation","innerText","current","update","then","deletable","admin"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport { fire } from \"../config/fire\";\nimport { UserContext } from \"../App\";\nimport \"../styles/post.css\";\n\nfunction Post(props) {\n  let postRef = useRef(\n    fire\n      .firestore()\n      .collection(\"posts\")\n      .doc(props.id)\n  );\n  let [status, setStatus] = useState(\"default\"),\n    [formData, setFormData] = useState({\n      title: props.title,\n      description: props.description,\n      phone: props.phone\n    });\n  let user = useContext(UserContext);\n  useEffect(() => {}, [setStatus, setFormData, handleClick]);\n\n  function handleChange(e) {\n    e.preventDefault();\n    let { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  }\n\n  function viewPost(e) {\n    e.stopPropagation();\n    status === \"viewing\" ? setStatus(\"default\") : setStatus(\"viewing\");\n  }\n\n  function handleClick(e) {\n    e.stopPropagation();\n    switch (e.target.innerText) {\n      case \"cancel\":\n      case \"no\":\n        setFormData({\n          title: props.title,\n          description: props.description,\n          phone: props.phone\n        });\n        setStatus(\"default\");\n        break;\n      case \"edit\":\n        setStatus(\"editing\");\n        break;\n      case \"delete\":\n        setStatus(\"deleting\");\n        break;\n      case \"save\":\n        postRef.current\n          .update({\n            title: formData.title,\n            description: formData.description,\n          })\n          .then(() => setStatus(\"default\"));\n\n        break;\n      case \"yes\":\n        postRef.current.update({\n          status: \"deleted\"\n        });\n        break;\n    }\n  }\n  return (\n    <div className=\"post\">\n      {status === \"editing\" ? (\n        <>\n          <form>\n            <div className=\"title-window editing\">\n              <input\n                className=\"post-title\"\n                name=\"title\"\n                onChange={handleChange}\n                value={formData.title}\n                autofocus=\"true\"\n              />\n            </div>\n            <div className=\"description-window editing\">\n              <textarea\n                className=\"post-description editing\"\n                name=\"description\"\n                value={formData.description}\n                onChange={handleChange}\n              />\n            </div>\n            <p className=\"contact-phone\">\n              <div>{props.name}</div> <div>tel. :{props.phone}</div>\n            </p>\n          </form>\n        </>\n      ) : (\n        <>\n          <div className=\"title-window\">\n            <p className=\"post-title\">{props.title}</p>\n          </div>\n          {status === \"viewing\" ? (\n            <div className=\"description-window \" onClick={viewPost}>\n              <p className=\"post-description viewing\">{props.description}</p>\n            </div>\n          ) : (\n            <div className=\"description-window\" onClick={viewPost}>\n              {status === \"deleting\" ? (\n                <p className=\"post-description deleting\">\n                  Are you sure you wish to delete this note?\n                </p>\n              ) : (\n                <p className=\"post-description\">{props.description}</p>\n              )}\n            </div>\n          )}\n          <p className=\"contact-phone\">\n            <div>{props.name}</div> <div>tel. :{props.phone}</div>\n          </p>\n        </>\n      )}\n\n      {props.deletable ? (\n        <>\n          <button\n            className=\"post-btn-red\"\n            onClick={handleClick}\n            value={props.id}\n          >\n            {status === \"editing\"\n              ? \"cancel\"\n              : status === \"deleting\"\n              ? \"yes\"\n              : \"delete\"}\n          </button>\n\n          {props.admin ? null : (\n            <button\n              className=\"post-btn-green\"\n              onClick={handleClick}\n              value={props.id}\n            >\n              {status === \"editing\"\n                ? \"save\"\n                : status === \"deleting\"\n                ? \"no\"\n                : \"edit\"}\n            </button>\n          )}\n        </>\n      ) : null}\n    </div>\n  );\n}\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}