{"ast":null,"code":"import _slicedToArray from \"/Users/anian/Desktop/services-all/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anian/Desktop/services-all/src/pages/Home.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Avatar from \"../components/Avatar\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\nimport Add from \"../components/Add\";\nimport { UserContext } from \"../App\";\nimport Message from \"../Message/Message\";\n\nfunction Home(props) {\n  let _useState = useState(\"All Categories\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selection = _useState2[0],\n      setSelection = _useState2[1];\n\n  let _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      list = _useState4[0],\n      setList = _useState4[1];\n\n  let user = useContext(UserContext);\n\n  let _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      keyword = _useState6[0],\n      setKeyword = _useState6[1];\n\n  function handlePostClick(e) {\n    e.stopPropagation();\n\n    if (e.target.innerText === \"delete\") {\n      fire.firestore().collection(\"posts\").doc(e.target.value).delete();\n    }\n  }\n\n  useEffect(() => {\n    let results = {};\n\n    if (selection === \"All Categories\") {\n      fire.firestore().collection(\"posts\").onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else if (selection === \"My Posts\") {\n      fire.firestore().collection(\"posts\").where(\"user\", \"==\", fire.auth().currentUser.email).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    } else {\n      fire.firestore().collection(\"posts\").where(\"category\", \"==\", selection).onSnapshot(snapshot => {\n        snapshot.forEach(doc => {\n          results[doc.id] = doc.data();\n        });\n        setList(results);\n      });\n    }\n  }, [selection, handlePostClick]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  function handleSearchChange(e) {\n    setKeyword(e.target.value);\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    onClick: handleSelection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })), React.createElement(Search, {\n    keyword: keyword,\n    onChange: handleSearchChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"results-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, list ? Object.keys(list).filter(item => list[item].title.toLowerCase().includes(keyword.trim().toLowerCase())).map((item, index) => {\n    return list[item].status === \"deleted\" ? null : React.createElement(\"div\", {\n      onClick: handlePostClick,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(Post, {\n      id: item,\n      title: list[item].title,\n      admin: props.admin ? true : false,\n      description: list[item].description,\n      deletable: selection === \"My Posts\" || user.admin ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }));\n  }) : React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })), React.createElement(Add, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), user.admin ? null : fire.auth().currentUser ? React.createElement(Message, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }) : null);\n}\n\nexport default Home;","map":{"version":3,"sources":["/Users/anian/Desktop/services-all/src/pages/Home.js"],"names":["React","useState","useEffect","useContext","Header","Footer","fire","Avatar","Post","Search","Add","UserContext","Message","Home","props","selection","setSelection","list","setList","user","keyword","setKeyword","handlePostClick","e","stopPropagation","target","innerText","firestore","collection","doc","value","delete","results","onSnapshot","snapshot","forEach","id","data","where","auth","currentUser","email","handleSelection","nodeName","handleSearchChange","Object","keys","filter","item","title","toLowerCase","includes","trim","map","index","status","admin","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport Header from \"../components/Header\";\nimport Footer from \"../components/Footer\";\nimport { fire } from \"../config/fire\";\nimport Avatar from \"../components/Avatar\";\nimport Post from \"../components/Post\";\nimport Search from \"../components/Search\";\nimport Add from \"../components/Add\";\nimport { UserContext } from \"../App\";\nimport Message from \"../Message/Message\";\n\nfunction Home(props) {\n  let [selection, setSelection] = useState(\"All Categories\");\n  let [list, setList] = useState(null);\n  let user = useContext(UserContext);\n  let [keyword, setKeyword] = useState(\"\");\n\n  function handlePostClick(e) {\n    e.stopPropagation();\n    if (e.target.innerText === \"delete\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .doc(e.target.value)\n        .delete();\n    }\n  }\n\n  useEffect(() => {\n    let results = {};\n\n    if (selection === \"All Categories\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else if (selection === \"My Posts\") {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"user\", \"==\", fire.auth().currentUser.email)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    } else {\n      fire\n        .firestore()\n        .collection(\"posts\")\n        .where(\"category\", \"==\", selection)\n        .onSnapshot(snapshot => {\n          snapshot.forEach(doc => {\n            results[doc.id] = doc.data();\n          });\n          setList(results);\n        });\n    }\n  }, [selection, handlePostClick]);\n\n  function handleSelection(e) {\n    e.stopPropagation();\n    if (e.target.nodeName === \"INPUT\") {\n      setSelection(e.target.value);\n    }\n  }\n\n  function handleSearchChange(e) {\n    setKeyword(e.target.value);\n  }\n\n  return (\n    <div>\n      <div onClick={handleSelection}>\n        <Header />\n      </div>\n      <Search keyword={keyword} onChange={handleSearchChange} />\n      <div className=\"results-container\">\n        {list ? (\n          Object.keys(list).filter(item => list[item].title.toLowerCase().includes(keyword.trim().toLowerCase())).map((item, index) => {\n            return list[item].status === \"deleted\" ? null : (\n              <div onClick={handlePostClick} key={index}>\n                <Post\n                  id={item}\n                  title={list[item].title}\n                  admin={props.admin ? true : false}\n                  description={list[item].description}\n                  deletable={\n                    selection === \"My Posts\" || user.admin ? true : false\n                  }\n                />\n              </div>\n            );\n          })\n        ) : <h1></h1>\n          }\n      </div>\n      <Add />\n\n      <Footer />\n      {user.admin ? null : fire.auth().currentUser ? <Message /> : null}\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}